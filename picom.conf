######################################
#           picom.conf (ibhagwan)    #
######################################

# Backend e Vsync
backend = "glx";
vsync = true;

# GLX tweaks (bons p/ AMD no X11)
glx-no-stencil = true;
glx-no-rebind-pixmap = true;

# Regras gerais/otimizações
use-damage = true;
mark-wmwin-focused = true;
mark-ovredir-focused = true;
detect-rounded-corners = true;
detect-client-opacity = true;
detect-transient = true;
detect-client-leader = true;
unredir-if-possible = false;

# --- Cantos arredondados ---
corner-radius = 5;
rounded-corners-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "class_g = 'Polybar'",
  "class_g = 'i3-frame'",
  "class_g = 'plasmashell'",
  "class_g = 'krunner'"
];

# --- Blur de fundo ---
# (dual_kawase ignora blur-deviation; use strength)
blur-method = "dual_kawase";
blur-strength = 3;               # ajuste entre 3–12 a gosto
blur-background = true;        # opcional
blur-background-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "class_g = 'plasmashell'",
  "class_g = 'krunner'",
  "window_type = 'notification'"
];

inactive-opacity = 0.85;
active-opacity   = 1.0;
frame-opacity    = 1.0;
inactive-opacity-override = true;


# --- Sombras ---
shadow = true;
shadow-radius = 15;
shadow-opacity = 0.25;
shadow-offset-x = -10;
shadow-offset-y = -10;
shadow-exclude = [
  "class_g = 'Polybar'",
  "class_g = 'Conky'",
  "class_g = 'i3-frame'",
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "class_g = 'plasmashell'",
  "class_g = 'krunner'",
  "window_type = 'notification'"
];

# --- Fading (animações) ---
fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-exclude = [
  "class_g = 'plasmashell'",
  "class_g = 'krunner'",
  "window_type = 'notification'"
];

# --- Opacidade específica ---
opacity-rule = [
  "100:class_g = 'i3-frame'",
  "100:class_g = 'Polybar'",
  "95:class_g = 'Alacritty'",
  "95:class_g = 'Kitty'",
  "95:class_g = 'URxvt'",
  "95:class_g = 'XTerm'"
];

# --- Tipos de janela ---
wintypes = {
  tooltip        = { fade = true; shadow = false; focus = true; };
  dock           = { shadow = false; blur-background = false; };
  dnd            = { shadow = false; };
  popup_menu     = { opacity = 1.0; };
  dropdown_menu  = { opacity = 1.0; };
  notification   = { shadow = false; blur-background = false; };
};

